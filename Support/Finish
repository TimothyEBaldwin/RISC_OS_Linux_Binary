DIM buffer% 100
SYS "OS_ReadVarVal","Sys$ReturnCode",buffer%,100,0,3 TO ,R$
R% = VAL(R$)
PRINT '"RISC OS terminating with exit code ";R%'

*Shutdown
SYS "XOS_SWINumberFromString",,"IXSupport_LinuxSyscall" TO LinuxSyscall%; V%
IF V% AND 1 THEN LinuxSyscall%=&C0200 ELSE VDU 7
SYS LinuxSyscall%,,,,,,,,1
